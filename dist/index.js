(()=>{"use strict";var e={653:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentBase=void 0;class n extends HTMLElement{constructor(){super();const e=this.attachShadow({mode:"open"}),t=document.createElement("style");t.textContent=this.getStyle(),e.innerHTML=this.renderHTML(),e.appendChild(t)}getStyle(){return""}renderHTML(){return""}}t.ComponentBase=n},519:(e,t,n)=>{const o=n(522);n(541),customElements.define("custom-select-view",o.CustomSelectView),customElements.define("type-select-view",o.TypeSelectView)},522:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TypeSelectView=t.CustomSelectView=void 0;class n extends HTMLElement{constructor(){super(),this.internalOptions=[];const e=this.attachShadow({mode:"open"}),t=document.createElement("style");"dark"===this.getAttribute("theme")?t.textContent="\n                button {\n                text-align: start;\n                background-color: #222222;\n                border: none;\n                padding: 8px 8px;\n                color: white;\n                }\n                button:hover {\n                background-color: #333333;\n                }\n                button.selected {\n                background-color: #0077FF;\n                color: white;\n                }\n                .d-none { display: none; }\n                .d-block { display: block;}\n                .d-flex { display: flex; flex-direction: column;}\n                }\n           ":t.textContent="\nbutton {\ntext-align: start;\nbackground-color: #FFFFFF;\nborder: none;\npadding: 8px 8px;\ncolor: black;\n}\nbutton:hover {\nbackground-color: #F0F0F0;\n}\nbutton.selected {\nbackground-color: #0077FF;\ncolor: white;\n}\n.d-none { display: none; }\n.d-block { display: block;}\n.d-flex { display: flex; flex-direction: column;}\n}\n",e.innerHTML='<div><div id="options-list" style="display: flex; flex-direction: column;"></div></div>',e.appendChild(t)}static get observedAttributes(){return["selectedoptionindex","theme"]}set options(e){this.internalOptions=e;const t=this.shadowRoot.getElementById("options-list");t.innerText="";for(const n of e){const e=document.createElement("button");e.setAttribute("value",n.value),e.innerText=n.label,e.addEventListener("click",(()=>{this.dispatchEvent(new CustomEvent("option-select",{detail:{value:n.value}}))})),t.appendChild(e)}}get options(){return this.internalOptions}attributeChangedCallback(e,t,n){if("selectedoptionindex"===e){const e=parseInt(n);if(e<0)return;for(const e of this.shadowRoot.getElementById("options-list").getElementsByTagName("button"))e.className="";this.shadowRoot.getElementById("options-list").getElementsByTagName("button").length>e&&(this.shadowRoot.getElementById("options-list").getElementsByTagName("button")[e].className="selected")}}}t.CustomSelectView=n;class o extends HTMLElement{constructor(){super(),this.Options=[{value:0,label:"dog"},{value:1,label:"cat"},{value:2,label:"rabbit"}],this.selectedOptionIndex=-1;const e=this.attachShadow({mode:"open"}),t=document.createElement("style"),n=this.getAttribute("theme");t.textContent="dark"===n?"\n        div#root {\n        position: relative;\n        display: flex;\n        flex-direction: column;\n        }\n        div#sub {\n          z-index: 1;\n          position: absolute;\n          top: 45px;\n          width: calc(100% - 8px);\n          margin: 0px 4px;\n          border: 1px solid rgba(0, 0, 0, 0.7);\nbackground-color: #333333;\n        }\n        button#create-new {\n          text-align: start;\n          background-color: #333333;\ncolor: white;\n          border: none;\n          padding: 8px 4px;\n        }\n        button#create-new:hover {\n          background-color: #505050;\n        }\n        .d-none { display: none; }\n        .d-block { display: block;}\n        div#sub.d-flex {\n          display: flex; flex-direction: column;\n          box-shadow: 0 0 5px 5px rgba(0, 0, 0, 0.3);\n        }\n        input#search {\nbackground-color: #303030;\ntransition: border-color 0.1s;\n          margin: 4px 4px;\n          border-radius: 0px;\n          border: 2px solid #303030;\n          padding: 8px 8px;\n          outline: none;\ncolor: white;\n}    input#search:focus-visible {\nborder: 2px solid rgba(100, 170, 255, 0.7);\noutline-width: 0;\n}\ninput#search.selected {\ncolor: #FF3311;\nborder-color: #FF3311;\n}\n":"\n        div#root {\n        position: relative;\n        display: flex;\n        flex-direction: column;\n        }\n        div#sub {\n          z-index: 1;\n          position: absolute;\n          top: 45px;\n          width: calc(100% - 8px);\n          margin: 0px 4px;\n          border: 1px solid #B0B0B0;\nbackground-color: #808080;\n        }\n        button#create-new {\n          text-align: start;\n          background-color: #FFFFFF;\ncolor: white;\n          border: none;\n          padding: 8px 4px;\n          color:black;\n        }\n        button#create-new:hover {\n          background-color: #F0F0F0;\n        }\n        .d-none { display: none; }\n        .d-block { display: block;}\n        div#sub.d-flex {\n          display: flex; flex-direction: column;\n          box-shadow: 0 0 5px 5px rgba(0, 0, 0, 0.1);\n        }\n        input#search {\nbackground-color: #FFFFFF;\ntransition: border-color 0.1s;\n          margin: 5px 5px;\n          border-radius: 0px;\n          border: 1px solid #707070;\n          padding: 8px 8px;\n          outline: none;\ncolor: black;\n}    input#search:focus-visible {\nborder: 2px solid rgba(100, 170, 255, 0.7);\nmargin: 4px;\noutline-width: 0;\n}\ninput#search.selected {\ncolor: #FF3311;\nborder-color: #FF3311;\n}\n";const o=this.getAttribute("placeholder")||"type here";e.innerHTML=`\n        <div id="root">\n          <form id="search-form" style="display: flex;">\n            <input id="search" type="text" placeholder=${o} style="width: 100%;" autocomplete="off"/>\n          </form>\n          <div id="sub" class="d-none">\n            <custom-select-view id="select-view" theme=${n}></custom-select-view>\n            <button id="create-new">Create </button>\n          </div>\n        </div>\n`,e.appendChild(t),e.getElementById("search").oninput=e=>{this.onSearchInputChange(e.target.value)},e.getElementById("search").onkeydown=e=>{"ArrowUp"===e.key?(this.selectedOptionIndex-=1,this.selectedOptionIndex<0&&(this.selectedOptionIndex=0),this.shadowRoot.getElementById("search").blur(),this.onFocus(),this.shadowRoot.getElementById("select-view").setAttribute("selectedoptionindex",this.selectedOptionIndex.toString())):"ArrowDown"===e.key?(this.selectedOptionIndex+=1,this.selectedOptionIndex>=this.options.length&&(this.selectedOptionIndex=this.options.length-1),this.shadowRoot.getElementById("search").blur(),this.onFocus(),this.shadowRoot.getElementById("select-view").setAttribute("selectedoptionindex",this.selectedOptionIndex.toString())):"Escape"===e.key&&this.onBlur()},e.getElementById("search-form").onsubmit=e=>(this.onSearchFormSubmit(),!1),e.getElementById("search-form").onfocus=()=>{this.onFocus()},e.getElementById("search").onfocus=()=>{this.onFocus()},this.Options=[{value:0,label:"dog"},{value:1,label:"cat"},{value:2,label:"rabbit"}],this.options=this.Options,this.onblur=()=>{this.onBlur()},this.onfocus=()=>{this.onFocus()},e.getElementById("select-view").addEventListener("option-select",(e=>{const t=e.detail.value;this.onOptionSelected(t)})),this.shadowRoot.getElementById("sub").className="d-none";const s=this.shadowRoot.getElementById("create-new");s.addEventListener("click",(e=>{this.onCreateNewButtonClicked()})),s.className="d-none"}static get observedAttributes(){return["theme","placeholder"]}onSearchFormSubmit(){const e=this.shadowRoot.getElementById("select-view");1===this.shadowRoot.getElementById("select-view").options.length?this.onOptionSelected(e.options[0].value):this.selectedOptionIndex>=0&&this.selectedOptionIndex<=this.Options.length?this.onOptionSelected(this.options[this.selectedOptionIndex].value):"d-block"===this.shadowRoot.getElementById("create-new").className&&this.onCreateNewButtonClicked(),this.onBlur()}onCreateNewButtonClicked(){new Array(this.Options);const e={value:this.Options.length,label:this.shadowRoot.getElementById("search").value};this.Options.push(e),this.dispatchEvent(new CustomEvent("selection-options-change",{detail:{options:this.Options}})),this.onOptionSelected(e.value)}onOptionSelected(e){let t="";for(const n of this.Options)n.value===e&&(t=n.label);this.shadowRoot.getElementById("search").value=t,this.dispatchEvent(new CustomEvent("type-select-change",{detail:{value:e}})),this.onBlur()}get currentLabel(){return this.shadowRoot.getElementById("search").value}onFocus(){this.shadowRoot.getElementById("sub").className="d-flex",this.shadowRoot.getElementById("search").focus()}onBlur(){this.shadowRoot.getElementById("search").blur(),this.shadowRoot.getElementById("sub").className="d-none"}setCreateNewButtonDisplay(e,t){const n=this.shadowRoot.getElementById("create-new");n.innerText=`Create: ${t}`,""!==t&&(e.length>1||1!==e.length||e[0].label!==t)?n.className="d-block":n.className="d-none"}onSearchInputChange(e){const t=this.Options.filter((t=>t.label.includes(e)));this.shadowRoot.getElementById("select-view").options=t,this.setCreateNewButtonDisplay(t,e)}set options(e){this.Options=e,this.shadowRoot.getElementById("select-view").options=e}get options(){return this.Options}set value(e){for(const t of this.options)t.value===e&&(this.shadowRoot.getElementById("search").value=t.label)}set selected(e){this.shadowRoot.getElementById("search").className=e?"selected":"not-selected"}}t.TypeSelectView=o},541:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TabSelection=void 0;const o=n(653);class s extends o.ComponentBase{constructor(){super(),this.currentSelectedIndex=-1,this.renderLabels()}static get observedAttributes(){return["theme","labels","optionindex"]}renderLabels(){const e=JSON.parse(this.getAttribute("labels")),t=this.shadowRoot.getElementById("root");if(t.innerText="",this.currentSelectedIndex<0){const e=parseInt(this.getAttribute("optionindex")||"0");this.currentSelectedIndex=e}let n=0;for(const o of e){const e=document.createElement("div"),s=n===this.currentSelectedIndex;e.setAttribute("class","tab-item-container "+(s?"selected":"not-selected")),e.innerHTML=`\n              <button class=${s?"selected":"not-selected"}>${o}</button>\n            `,t.appendChild(e);const i=n;e.addEventListener("click",(()=>{this.currentSelectedIndex=i,this.renderLabels(),this.dispatchEvent(new CustomEvent("option-select",{detail:{index:i,label:o}}))})),n+=1}}getStyle(){return"div#root {\ndisplay: grid;\ngap: 0px;\n      grid-auto-columns: 1fr;\n      grid-auto-flow: column;\n      border-radius: 2px;\n    }\ndiv#root.dark {\nbackground-color: #1F1F1F;\nborder: 1px solid #505050;\n}\ndiv#root.light {\nbackground-color: white;;\nborder: 1px solid #C0C0C0;\n}\n    button {\n      appearance: none;\n      margin: 0px;\n      margin-right: auto;\n      margin-left: auto;\n      border: 0px;\n      padding: 4px 8px;\n      font-size: 0.8rem;\n      font-weight: bold;\n      font-family: system-ui;\n    }\n    div.light button {\nbackground-color: transparent\n}\n    div.dark button {\nbackground-color: rgba(0, 0, 0, 0.0);\n}\n    div.dark button.selected{\n      color: rgba(0, 0, 0, 1.0);\n      //background-color: rgba(0, 0, 0, 0.07);\n    }\n    div.dark button.not-selected{\n      color: rgba(255, 255, 255, 0.8);\n      //background-color: rgba(0, 0, 0, 0);\n    }\n    div.light button.selected { color: white;}\n    div.light button.not-selected { color: #505050;}\n    div.selected, div.not-selected{\n      display: flex;\n      padding: 0px 4px;\nborder-radius: 2px;\ntransition: background-color 0.1s;\n    }\n    div.dark div.selected {\n      background-color: #AAAAAA;\n    }\n    div.dark div.not-selected {\n      background-color: rgba(0, 0, 0, 0.0);\n\n    }\n    div.dark div.not-selected:hover {\n      background-color: rgba(255, 255, 255, 0.1);\n    }\ndiv.light div.not-selected:hover {background-color: rgba(0, 0, 0, 0.05);}\n    div.light div.selected {\nbackground-color: #0077FF;\n}\ndiv.light div.not-selected {\nbackground-color: white;\n}\n\n    "}renderHTML(){return`\n        <div id="root" class=${this.getAttribute("theme")||"light"}>\n        </div>\n        `}}t.TabSelection=s,customElements.define("tab-selection",s)}},t={};!function n(o){var s=t[o];if(void 0!==s)return s.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}(519)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Tyw0a0RBNEZYRSxhQUNJLE1BQU8sa0NBQ2dCVCxLQUFLaUIsYUFBYSxVQUFZLHNDQUs3RHhCLEVBQVFrRixhQUFlQSxFQUN2Qi9ELGVBQWVDLE9BQU8sZ0JBQWlCOEQsS0M5SW5DYSxFQUEyQixJQUcvQixTQUFTQyxFQUFvQkMsR0FFNUIsSUFBSUMsRUFBZUgsRUFBeUJFLEdBQzVDLFFBQXFCRSxJQUFqQkQsRUFDSCxPQUFPQSxFQUFhbEcsUUFHckIsSUFBSW9HLEVBQVNMLEVBQXlCRSxHQUFZLENBR2pEakcsUUFBUyxJQU9WLE9BSEFxRyxFQUFvQkosR0FBVUcsRUFBUUEsRUFBT3BHLFFBQVNnRyxHQUcvQ0ksRUFBT3BHLFEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93Yy1pdGVtcy8uL3NyYy9iYXNlLnRzIiwid2VicGFjazovL3djLWl0ZW1zLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vd2MtaXRlbXMvLi9zcmMvc2VsZWN0aW9uLnRzIiwid2VicGFjazovL3djLWl0ZW1zLy4vc3JjL3RhYlNlbGVjdGlvbi50cyIsIndlYnBhY2s6Ly93Yy1pdGVtcy93ZWJwYWNrL2Jvb3RzdHJhcCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQ29tcG9uZW50QmFzZSA9IHZvaWQgMDtcbmNsYXNzIENvbXBvbmVudEJhc2UgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGNvbnN0IHNoYWRvdyA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJvcGVuXCIgfSk7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IHRoaXMuZ2V0U3R5bGUoKTtcbiAgICAgICAgc2hhZG93LmlubmVySFRNTCA9IHRoaXMucmVuZGVySFRNTCgpO1xuICAgICAgICBzaGFkb3cuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgIH1cbiAgICBnZXRTdHlsZSgpIHtcbiAgICAgICAgcmV0dXJuIGBgO1xuICAgIH1cbiAgICByZW5kZXJIVE1MKCkge1xuICAgICAgICByZXR1cm4gYGA7XG4gICAgfVxufVxuZXhwb3J0cy5Db21wb25lbnRCYXNlID0gQ29tcG9uZW50QmFzZTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5DdXN0b21TZWxlY3RWaWV3ID0gZXhwb3J0cy5UeXBlU2VsZWN0VmlldyA9IHZvaWQgMDtcbmNvbnN0IHNlbGVjdGlvbl8xID0gcmVxdWlyZShcIi4vc2VsZWN0aW9uXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiVHlwZVNlbGVjdFZpZXdcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGVjdGlvbl8xLlR5cGVTZWxlY3RWaWV3OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQ3VzdG9tU2VsZWN0Vmlld1wiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZWN0aW9uXzEuQ3VzdG9tU2VsZWN0VmlldzsgfSB9KTtcbnJlcXVpcmUoXCIuL3RhYlNlbGVjdGlvblwiKTtcbi8vIGltcG9ydCB7IFRhYlNlbGVjdGlvbiB9IGZyb20gJy4vdGFiU2VsZWN0aW9uJztcbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcImN1c3RvbS1zZWxlY3Qtdmlld1wiLCBzZWxlY3Rpb25fMS5DdXN0b21TZWxlY3RWaWV3KTtcbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcInR5cGUtc2VsZWN0LXZpZXdcIiwgc2VsZWN0aW9uXzEuVHlwZVNlbGVjdFZpZXcpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlR5cGVTZWxlY3RWaWV3ID0gZXhwb3J0cy5DdXN0b21TZWxlY3RWaWV3ID0gdm9pZCAwO1xuY2xhc3MgQ3VzdG9tU2VsZWN0VmlldyBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5pbnRlcm5hbE9wdGlvbnMgPSBbXTtcbiAgICAgICAgY29uc3Qgc2hhZG93ID0gdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgICAgIGlmICh0aGlzLmdldEF0dHJpYnV0ZShcInRoZW1lXCIpID09PSBcImRhcmtcIikge1xuICAgICAgICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSBgXG4gICAgICAgICAgICAgICAgYnV0dG9uIHtcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBzdGFydDtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjIyMjIyO1xuICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiA4cHggOHB4O1xuICAgICAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnV0dG9uOmhvdmVyIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzMzMzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBidXR0b24uc2VsZWN0ZWQge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDc3RkY7XG4gICAgICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAuZC1ub25lIHsgZGlzcGxheTogbm9uZTsgfVxuICAgICAgICAgICAgICAgIC5kLWJsb2NrIHsgZGlzcGxheTogYmxvY2s7fVxuICAgICAgICAgICAgICAgIC5kLWZsZXggeyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uO31cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgIGA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IGBcbmJ1dHRvbiB7XG50ZXh0LWFsaWduOiBzdGFydDtcbmJhY2tncm91bmQtY29sb3I6ICNGRkZGRkY7XG5ib3JkZXI6IG5vbmU7XG5wYWRkaW5nOiA4cHggOHB4O1xuY29sb3I6IGJsYWNrO1xufVxuYnV0dG9uOmhvdmVyIHtcbmJhY2tncm91bmQtY29sb3I6ICNGMEYwRjA7XG59XG5idXR0b24uc2VsZWN0ZWQge1xuYmFja2dyb3VuZC1jb2xvcjogIzAwNzdGRjtcbmNvbG9yOiB3aGl0ZTtcbn1cbi5kLW5vbmUgeyBkaXNwbGF5OiBub25lOyB9XG4uZC1ibG9jayB7IGRpc3BsYXk6IGJsb2NrO31cbi5kLWZsZXggeyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uO31cbn1cbmA7XG4gICAgICAgIH1cbiAgICAgICAgc2hhZG93LmlubmVySFRNTCA9IGA8ZGl2PjxkaXYgaWQ9XCJvcHRpb25zLWxpc3RcIiBzdHlsZT1cImRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XCI+PC9kaXY+PC9kaXY+YDtcbiAgICAgICAgc2hhZG93LmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICB9XG4gICAgc3RhdGljIGdldCBvYnNlcnZlZEF0dHJpYnV0ZXMoKSB7XG4gICAgICAgIHJldHVybiBbXCJzZWxlY3RlZG9wdGlvbmluZGV4XCIsIFwidGhlbWVcIl07XG4gICAgfVxuICAgIHNldCBvcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5pbnRlcm5hbE9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICBjb25zdCBvcHRpb25zTGlzdENvbnRhaW5lciA9IHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcIm9wdGlvbnMtbGlzdFwiKTtcbiAgICAgICAgb3B0aW9uc0xpc3RDb250YWluZXIuaW5uZXJUZXh0ID0gXCJcIjtcbiAgICAgICAgZm9yIChjb25zdCBvcHRpb24gb2Ygb3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgICAgICBvcHRpb25FbGVtZW50LnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIG9wdGlvbi52YWx1ZSk7XG4gICAgICAgICAgICBvcHRpb25FbGVtZW50LmlubmVyVGV4dCA9IG9wdGlvbi5sYWJlbDtcbiAgICAgICAgICAgIG9wdGlvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwib3B0aW9uLXNlbGVjdFwiLCB7IGRldGFpbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG9wdGlvbi52YWx1ZVxuICAgICAgICAgICAgICAgICAgICB9IH0pKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgb3B0aW9uc0xpc3RDb250YWluZXIuYXBwZW5kQ2hpbGQob3B0aW9uRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmludGVybmFsT3B0aW9ucztcbiAgICB9XG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiKTtcbiAgICAgICAgaWYgKG5hbWUgPT09IFwic2VsZWN0ZWRvcHRpb25pbmRleFwiKSB7XG4gICAgICAgICAgICAvLyByZS1kcmF3XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZE9wdGlvbkluZGV4ID0gcGFyc2VJbnQobmV3VmFsdWUpO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkT3B0aW9uSW5kZXggPCAwKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJvcHRpb25zLWxpc3RcIikuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJidXR0b25cIikpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwib3B0aW9ucy1saXN0XCIpLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYnV0dG9uXCIpLmxlbmd0aCA+IHNlbGVjdGVkT3B0aW9uSW5kZXgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJvcHRpb25zLWxpc3RcIikuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJidXR0b25cIilbc2VsZWN0ZWRPcHRpb25JbmRleF0uY2xhc3NOYW1lID0gXCJzZWxlY3RlZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5DdXN0b21TZWxlY3RWaWV3ID0gQ3VzdG9tU2VsZWN0VmlldztcbmNsYXNzIFR5cGVTZWxlY3RWaWV3IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLk9wdGlvbnMgPSBbXG4gICAgICAgICAgICB7IHZhbHVlOiAwLCBsYWJlbDogXCJkb2dcIiB9LFxuICAgICAgICAgICAgeyB2YWx1ZTogMSwgbGFiZWw6IFwiY2F0XCIgfSxcbiAgICAgICAgICAgIHsgdmFsdWU6IDIsIGxhYmVsOiBcInJhYmJpdFwiIH0sXG4gICAgICAgIF07XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25JbmRleCA9IC0xO1xuICAgICAgICBjb25zdCBzaGFkb3cgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pO1xuICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgICAgY29uc3QgdGhlbWUgPSB0aGlzLmdldEF0dHJpYnV0ZShcInRoZW1lXCIpO1xuICAgICAgICBpZiAodGhlbWUgPT09IFwiZGFya1wiKSB7XG4gICAgICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgZGl2I3Jvb3Qge1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIH1cbiAgICAgICAgZGl2I3N1YiB7XG4gICAgICAgICAgei1pbmRleDogMTtcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgdG9wOiA0NXB4O1xuICAgICAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSA4cHgpO1xuICAgICAgICAgIG1hcmdpbjogMHB4IDRweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuNyk7XG5iYWNrZ3JvdW5kLWNvbG9yOiAjMzMzMzMzO1xuICAgICAgICB9XG4gICAgICAgIGJ1dHRvbiNjcmVhdGUtbmV3IHtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBzdGFydDtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzMzMzO1xuY29sb3I6IHdoaXRlO1xuICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICBwYWRkaW5nOiA4cHggNHB4O1xuICAgICAgICB9XG4gICAgICAgIGJ1dHRvbiNjcmVhdGUtbmV3OmhvdmVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTA1MDUwO1xuICAgICAgICB9XG4gICAgICAgIC5kLW5vbmUgeyBkaXNwbGF5OiBub25lOyB9XG4gICAgICAgIC5kLWJsb2NrIHsgZGlzcGxheTogYmxvY2s7fVxuICAgICAgICBkaXYjc3ViLmQtZmxleCB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBib3gtc2hhZG93OiAwIDAgNXB4IDVweCByZ2JhKDAsIDAsIDAsIDAuMyk7XG4gICAgICAgIH1cbiAgICAgICAgaW5wdXQjc2VhcmNoIHtcbmJhY2tncm91bmQtY29sb3I6ICMzMDMwMzA7XG50cmFuc2l0aW9uOiBib3JkZXItY29sb3IgMC4xcztcbiAgICAgICAgICBtYXJnaW46IDRweCA0cHg7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogMHB4O1xuICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICMzMDMwMzA7XG4gICAgICAgICAgcGFkZGluZzogOHB4IDhweDtcbiAgICAgICAgICBvdXRsaW5lOiBub25lO1xuY29sb3I6IHdoaXRlO1xufSAgICBpbnB1dCNzZWFyY2g6Zm9jdXMtdmlzaWJsZSB7XG5ib3JkZXI6IDJweCBzb2xpZCByZ2JhKDEwMCwgMTcwLCAyNTUsIDAuNyk7XG5vdXRsaW5lLXdpZHRoOiAwO1xufVxuaW5wdXQjc2VhcmNoLnNlbGVjdGVkIHtcbmNvbG9yOiAjRkYzMzExO1xuYm9yZGVyLWNvbG9yOiAjRkYzMzExO1xufVxuYDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gYFxuICAgICAgICBkaXYjcm9vdCB7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgfVxuICAgICAgICBkaXYjc3ViIHtcbiAgICAgICAgICB6LWluZGV4OiAxO1xuICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICB0b3A6IDQ1cHg7XG4gICAgICAgICAgd2lkdGg6IGNhbGMoMTAwJSAtIDhweCk7XG4gICAgICAgICAgbWFyZ2luOiAwcHggNHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNCMEIwQjA7XG5iYWNrZ3JvdW5kLWNvbG9yOiAjODA4MDgwO1xuICAgICAgICB9XG4gICAgICAgIGJ1dHRvbiNjcmVhdGUtbmV3IHtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBzdGFydDtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRkZGRkZGO1xuY29sb3I6IHdoaXRlO1xuICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICBwYWRkaW5nOiA4cHggNHB4O1xuICAgICAgICAgIGNvbG9yOmJsYWNrO1xuICAgICAgICB9XG4gICAgICAgIGJ1dHRvbiNjcmVhdGUtbmV3OmhvdmVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjBGMEYwO1xuICAgICAgICB9XG4gICAgICAgIC5kLW5vbmUgeyBkaXNwbGF5OiBub25lOyB9XG4gICAgICAgIC5kLWJsb2NrIHsgZGlzcGxheTogYmxvY2s7fVxuICAgICAgICBkaXYjc3ViLmQtZmxleCB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBib3gtc2hhZG93OiAwIDAgNXB4IDVweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgICAgIH1cbiAgICAgICAgaW5wdXQjc2VhcmNoIHtcbmJhY2tncm91bmQtY29sb3I6ICNGRkZGRkY7XG50cmFuc2l0aW9uOiBib3JkZXItY29sb3IgMC4xcztcbiAgICAgICAgICBtYXJnaW46IDVweCA1cHg7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogMHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM3MDcwNzA7XG4gICAgICAgICAgcGFkZGluZzogOHB4IDhweDtcbiAgICAgICAgICBvdXRsaW5lOiBub25lO1xuY29sb3I6IGJsYWNrO1xufSAgICBpbnB1dCNzZWFyY2g6Zm9jdXMtdmlzaWJsZSB7XG5ib3JkZXI6IDJweCBzb2xpZCByZ2JhKDEwMCwgMTcwLCAyNTUsIDAuNyk7XG5tYXJnaW46IDRweDtcbm91dGxpbmUtd2lkdGg6IDA7XG59XG5pbnB1dCNzZWFyY2guc2VsZWN0ZWQge1xuY29sb3I6ICNGRjMzMTE7XG5ib3JkZXItY29sb3I6ICNGRjMzMTE7XG59XG5gO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiKSB8fCBcInR5cGUgaGVyZVwiO1xuICAgICAgICBzaGFkb3cuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGlkPVwicm9vdFwiPlxuICAgICAgICAgIDxmb3JtIGlkPVwic2VhcmNoLWZvcm1cIiBzdHlsZT1cImRpc3BsYXk6IGZsZXg7XCI+XG4gICAgICAgICAgICA8aW5wdXQgaWQ9XCJzZWFyY2hcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPSR7cGxhY2Vob2xkZXJ9IHN0eWxlPVwid2lkdGg6IDEwMCU7XCIgYXV0b2NvbXBsZXRlPVwib2ZmXCIvPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICA8ZGl2IGlkPVwic3ViXCIgY2xhc3M9XCJkLW5vbmVcIj5cbiAgICAgICAgICAgIDxjdXN0b20tc2VsZWN0LXZpZXcgaWQ9XCJzZWxlY3Qtdmlld1wiIHRoZW1lPSR7dGhlbWV9PjwvY3VzdG9tLXNlbGVjdC12aWV3PlxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cImNyZWF0ZS1uZXdcIj5DcmVhdGUgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuYDtcbiAgICAgICAgc2hhZG93LmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICAgICAgc2hhZG93LmdldEVsZW1lbnRCeUlkKFwic2VhcmNoXCIpLm9uaW5wdXQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25TZWFyY2hJbnB1dENoYW5nZShldmVudC50YXJnZXQudmFsdWUpO1xuICAgICAgICB9O1xuICAgICAgICBzaGFkb3cuZ2V0RWxlbWVudEJ5SWQoXCJzZWFyY2hcIikub25rZXlkb3duID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIm9uIGtleSBkb3duXCIpO1xuICAgICAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gXCJBcnJvd1VwXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9uSW5kZXggLT0gMTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZE9wdGlvbkluZGV4IDwgMClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbkluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJzZWFyY2hcIikuYmx1cigpO1xuICAgICAgICAgICAgICAgIHRoaXMub25Gb2N1cygpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcInNlbGVjdC12aWV3XCIpLnNldEF0dHJpYnV0ZShcInNlbGVjdGVkb3B0aW9uaW5kZXhcIiwgdGhpcy5zZWxlY3RlZE9wdGlvbkluZGV4LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnQua2V5ID09PSBcIkFycm93RG93blwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbkluZGV4ICs9IDE7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRPcHRpb25JbmRleCA+PSB0aGlzLm9wdGlvbnMubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9uSW5kZXggPSB0aGlzLm9wdGlvbnMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJzZWFyY2hcIikuYmx1cigpO1xuICAgICAgICAgICAgICAgIHRoaXMub25Gb2N1cygpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcInNlbGVjdC12aWV3XCIpLnNldEF0dHJpYnV0ZShcInNlbGVjdGVkb3B0aW9uaW5kZXhcIiwgdGhpcy5zZWxlY3RlZE9wdGlvbkluZGV4LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkJsdXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgc2hhZG93LmdldEVsZW1lbnRCeUlkKFwic2VhcmNoLWZvcm1cIikub25zdWJtaXQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25TZWFyY2hGb3JtU3VibWl0KCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIHNoYWRvdy5nZXRFbGVtZW50QnlJZChcInNlYXJjaC1mb3JtXCIpLm9uZm9jdXMgPSAoKSA9PiB7IHRoaXMub25Gb2N1cygpOyB9O1xuICAgICAgICBzaGFkb3cuZ2V0RWxlbWVudEJ5SWQoXCJzZWFyY2hcIikub25mb2N1cyA9ICgpID0+IHsgdGhpcy5vbkZvY3VzKCk7IH07XG4gICAgICAgIHRoaXMuT3B0aW9ucyA9IFtcbiAgICAgICAgICAgIHsgdmFsdWU6IDAsIGxhYmVsOiBcImRvZ1wiIH0sXG4gICAgICAgICAgICB7IHZhbHVlOiAxLCBsYWJlbDogXCJjYXRcIiB9LFxuICAgICAgICAgICAgeyB2YWx1ZTogMiwgbGFiZWw6IFwicmFiYml0XCIgfSxcbiAgICAgICAgXTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gdGhpcy5PcHRpb25zO1xuICAgICAgICB0aGlzLm9uYmx1ciA9ICgpID0+IHsgdGhpcy5vbkJsdXIoKTsgfTtcbiAgICAgICAgdGhpcy5vbmZvY3VzID0gKCkgPT4geyB0aGlzLm9uRm9jdXMoKTsgfTtcbiAgICAgICAgc2hhZG93LmdldEVsZW1lbnRCeUlkKFwic2VsZWN0LXZpZXdcIikuYWRkRXZlbnRMaXN0ZW5lcihcIm9wdGlvbi1zZWxlY3RcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZFZhbHVlID0gZXZlbnQuZGV0YWlsLnZhbHVlO1xuICAgICAgICAgICAgdGhpcy5vbk9wdGlvblNlbGVjdGVkKChzZWxlY3RlZFZhbHVlKSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJzdWJcIikuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJkaXNwbGF5OiBub25lO1wiKTtcbiAgICAgICAgdGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwic3ViXCIpLmNsYXNzTmFtZSA9IFwiZC1ub25lXCI7XG4gICAgICAgIGNvbnN0IGNyZWF0ZU5ld0J1dHRvbiA9IHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcImNyZWF0ZS1uZXdcIik7XG4gICAgICAgIGNyZWF0ZU5ld0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7IHRoaXMub25DcmVhdGVOZXdCdXR0b25DbGlja2VkKCk7IH0pO1xuICAgICAgICBjcmVhdGVOZXdCdXR0b24uY2xhc3NOYW1lID0gXCJkLW5vbmVcIjtcbiAgICB9XG4gICAgc3RhdGljIGdldCBvYnNlcnZlZEF0dHJpYnV0ZXMoKSB7XG4gICAgICAgIHJldHVybiBbXCJ0aGVtZVwiLCBcInBsYWNlaG9sZGVyXCJdO1xuICAgIH1cbiAgICBvblNlYXJjaEZvcm1TdWJtaXQoKSB7XG4gICAgICAgIC8vIGNyZWF0ZSBvciBzZXRcbiAgICAgICAgY29uc3Qgc2VsZWN0VmlldyA9IHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcInNlbGVjdC12aWV3XCIpO1xuICAgICAgICBpZiAodGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwic2VsZWN0LXZpZXdcIikub3B0aW9ucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIHRoaXMub25PcHRpb25TZWxlY3RlZChzZWxlY3RWaWV3Lm9wdGlvbnNbMF1bXCJ2YWx1ZVwiXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5zZWxlY3RlZE9wdGlvbkluZGV4ID49IDAgJiYgdGhpcy5zZWxlY3RlZE9wdGlvbkluZGV4IDw9IHRoaXMuT3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMub25PcHRpb25TZWxlY3RlZCh0aGlzLm9wdGlvbnNbdGhpcy5zZWxlY3RlZE9wdGlvbkluZGV4XVtcInZhbHVlXCJdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJjcmVhdGUtbmV3XCIpLmNsYXNzTmFtZSA9PT0gXCJkLWJsb2NrXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ3JlYXRlTmV3QnV0dG9uQ2xpY2tlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMub25CbHVyKCk7XG4gICAgfVxuICAgIG9uQ3JlYXRlTmV3QnV0dG9uQ2xpY2tlZCgpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IG5ldyBBcnJheSh0aGlzLk9wdGlvbnMpO1xuICAgICAgICBjb25zdCBuZXdPcHRpb24gPSB7XG4gICAgICAgICAgICBcInZhbHVlXCI6IHRoaXMuT3B0aW9ucy5sZW5ndGgsXG4gICAgICAgICAgICBcImxhYmVsXCI6IHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcInNlYXJjaFwiKS52YWx1ZVxuICAgICAgICB9O1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhgb3B0aW9ucy5sZW5ndGg9JHt0aGlzLk9wdGlvbnMubGVuZ3RofWApO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhuZXdPcHRpb24pO1xuICAgICAgICAvLyBvcHRpb25zLnB1c2gobmV3T3B0aW9uKTtcbiAgICAgICAgdGhpcy5PcHRpb25zLnB1c2gobmV3T3B0aW9uKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcInNlbGVjdGlvbi1vcHRpb25zLWNoYW5nZVwiLCB7XG4gICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgICBvcHRpb25zOiB0aGlzLk9wdGlvbnNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLm9uT3B0aW9uU2VsZWN0ZWQobmV3T3B0aW9uLnZhbHVlKTtcbiAgICB9XG4gICAgb25PcHRpb25TZWxlY3RlZCh2YWx1ZSkge1xuICAgICAgICBsZXQgbGFiZWwgPSBcIlwiO1xuICAgICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiB0aGlzLk9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb24udmFsdWUgPT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgbGFiZWwgPSBvcHRpb24ubGFiZWw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwic2VhcmNoXCIpLnZhbHVlID0gbGFiZWw7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJ0eXBlLXNlbGVjdC1jaGFuZ2VcIiwgeyBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgICAgICAgIH0gfSkpO1xuICAgICAgICB0aGlzLm9uQmx1cigpO1xuICAgIH1cbiAgICBnZXQgY3VycmVudExhYmVsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwic2VhcmNoXCIpLnZhbHVlO1xuICAgIH1cbiAgICBvbkZvY3VzKCkge1xuICAgICAgICAvLyB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJzdWJcIikuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJkaXNwbGF5OiBibG9jaztcIik7XG4gICAgICAgIC8vIHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcInN1YlwiKS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImRpc3BsYXk6IGZsZXg7XCIpO1xuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJzdWJcIikuY2xhc3NOYW1lID0gXCJkLWZsZXhcIjtcbiAgICAgICAgdGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwic2VhcmNoXCIpLmZvY3VzKCk7XG4gICAgfVxuICAgIG9uQmx1cigpIHtcbiAgICAgICAgLy8gdGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwic3ViXCIpLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiZGlzcGxheTogbm9uZTtcIik7XG4gICAgICAgIHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcInNlYXJjaFwiKS5ibHVyKCk7XG4gICAgICAgIHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcInN1YlwiKS5jbGFzc05hbWUgPSBcImQtbm9uZVwiO1xuICAgIH1cbiAgICBzZXRDcmVhdGVOZXdCdXR0b25EaXNwbGF5KGZpbHRlcmVkT3B0aW9ucywgc2VhcmNoUXVlcnkpIHtcbiAgICAgICAgY29uc3QgY3JlYXRlTmV3QnV0dG9uID0gdGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwiY3JlYXRlLW5ld1wiKTtcbiAgICAgICAgY3JlYXRlTmV3QnV0dG9uLmlubmVyVGV4dCA9IGBDcmVhdGU6ICR7c2VhcmNoUXVlcnl9YDtcbiAgICAgICAgaWYgKHNlYXJjaFF1ZXJ5ID09PSBcIlwiKSB7XG4gICAgICAgICAgICBjcmVhdGVOZXdCdXR0b24uY2xhc3NOYW1lID0gXCJkLW5vbmVcIjtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlsdGVyZWRPcHRpb25zLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGNyZWF0ZU5ld0J1dHRvbi5jbGFzc05hbWUgPSBcImQtYmxvY2tcIjtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChmaWx0ZXJlZE9wdGlvbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBpZiAoZmlsdGVyZWRPcHRpb25zWzBdW1wibGFiZWxcIl0gPT09IHNlYXJjaFF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgY3JlYXRlTmV3QnV0dG9uLmNsYXNzTmFtZSA9IFwiZC1ub25lXCI7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNyZWF0ZU5ld0J1dHRvbi5jbGFzc05hbWUgPSBcImQtYmxvY2tcIjtcbiAgICB9XG4gICAgb25TZWFyY2hJbnB1dENoYW5nZShzZWFyY2hRdWVyeSkge1xuICAgICAgICBjb25zdCBmaWx0ZXJlZE9wdGlvbnMgPSB0aGlzLk9wdGlvbnMuZmlsdGVyKChvcHRpb24pID0+IHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb25bXCJsYWJlbFwiXS5pbmNsdWRlcyhzZWFyY2hRdWVyeSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJzZWxlY3Qtdmlld1wiKS5vcHRpb25zID0gZmlsdGVyZWRPcHRpb25zO1xuICAgICAgICB0aGlzLnNldENyZWF0ZU5ld0J1dHRvbkRpc3BsYXkoZmlsdGVyZWRPcHRpb25zLCBzZWFyY2hRdWVyeSk7XG4gICAgICAgIC8vIHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcImNyZWF0ZS1uZXdcIikuaW5uZXJUZXh0ID0gYOaWsOimj+S9nOaIkDogJHtzZWFyY2hRdWVyeX1gO1xuICAgIH1cbiAgICBzZXQgb3B0aW9ucyhvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuT3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcInNlbGVjdC12aWV3XCIpLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIH1cbiAgICBnZXQgb3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuT3B0aW9ucztcbiAgICB9XG4gICAgc2V0IHZhbHVlKHZhbHVlKSB7XG4gICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIHRoaXMub3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKG9wdGlvbltcInZhbHVlXCJdID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcInNlYXJjaFwiKS52YWx1ZSA9IG9wdGlvbltcImxhYmVsXCJdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHNldCBzZWxlY3RlZChzZWxlY3RlZCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhcInNldCBzZWxlY3RlZFwiKTtcbiAgICAgICAgdGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwic2VhcmNoXCIpLmNsYXNzTmFtZSA9IHNlbGVjdGVkID8gXCJzZWxlY3RlZFwiIDogXCJub3Qtc2VsZWN0ZWRcIjtcbiAgICB9XG59XG5leHBvcnRzLlR5cGVTZWxlY3RWaWV3ID0gVHlwZVNlbGVjdFZpZXc7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVGFiU2VsZWN0aW9uID0gdm9pZCAwO1xuY29uc3QgYmFzZV8xID0gcmVxdWlyZShcIi4vYmFzZVwiKTtcbmNsYXNzIFRhYlNlbGVjdGlvbiBleHRlbmRzIGJhc2VfMS5Db21wb25lbnRCYXNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jdXJyZW50U2VsZWN0ZWRJbmRleCA9IC0xO1xuICAgICAgICB0aGlzLnJlbmRlckxhYmVscygpO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IG9ic2VydmVkQXR0cmlidXRlcygpIHtcbiAgICAgICAgcmV0dXJuIFtcInRoZW1lXCIsIFwibGFiZWxzXCIsIFwib3B0aW9uaW5kZXhcIl07XG4gICAgfVxuICAgIHJlbmRlckxhYmVscygpIHtcbiAgICAgICAgY29uc3QgbGFiZWxzID0gSlNPTi5wYXJzZSh0aGlzLmdldEF0dHJpYnV0ZShcImxhYmVsc1wiKSk7XG4gICAgICAgIGNvbnN0IHJvb3RFbGVtZW50ID0gdGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwicm9vdFwiKTtcbiAgICAgICAgcm9vdEVsZW1lbnQuaW5uZXJUZXh0ID0gXCJcIjtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFNlbGVjdGVkSW5kZXggPCAwKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZEluZGV4ID0gcGFyc2VJbnQodGhpcy5nZXRBdHRyaWJ1dGUoXCJvcHRpb25pbmRleFwiKSB8fCBcIjBcIik7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWxlY3RlZEluZGV4ID0gc2VsZWN0ZWRJbmRleDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IGxhYmVsIG9mIGxhYmVscykge1xuICAgICAgICAgICAgY29uc3QgbGFiZWxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGNvbnN0IGxhYmVsU2VsZWN0ZWQgPSAoaW5kZXggPT09IHRoaXMuY3VycmVudFNlbGVjdGVkSW5kZXgpO1xuICAgICAgICAgICAgbGFiZWxFbGVtZW50LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIGB0YWItaXRlbS1jb250YWluZXIgJHtsYWJlbFNlbGVjdGVkID8gJ3NlbGVjdGVkJyA6ICdub3Qtc2VsZWN0ZWQnfWApO1xuICAgICAgICAgICAgbGFiZWxFbGVtZW50LmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ke2xhYmVsU2VsZWN0ZWQgPyBcInNlbGVjdGVkXCIgOiBcIm5vdC1zZWxlY3RlZFwifT4ke2xhYmVsfTwvYnV0dG9uPlxuICAgICAgICAgICAgYDtcbiAgICAgICAgICAgIHJvb3RFbGVtZW50LmFwcGVuZENoaWxkKGxhYmVsRWxlbWVudCk7XG4gICAgICAgICAgICBjb25zdCBmaW5hbEluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICBsYWJlbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWxlY3RlZEluZGV4ID0gZmluYWxJbmRleDtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckxhYmVscygpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJvcHRpb24tc2VsZWN0XCIsIHsgZGV0YWlsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogZmluYWxJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBsYWJlbFxuICAgICAgICAgICAgICAgICAgICB9IH0pKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaW5kZXggKz0gMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRTdHlsZSgpIHtcbiAgICAgICAgcmV0dXJuIGBkaXYjcm9vdCB7XG5kaXNwbGF5OiBncmlkO1xuZ2FwOiAwcHg7XG4gICAgICBncmlkLWF1dG8tY29sdW1uczogMWZyO1xuICAgICAgZ3JpZC1hdXRvLWZsb3c6IGNvbHVtbjtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDJweDtcbiAgICB9XG5kaXYjcm9vdC5kYXJrIHtcbmJhY2tncm91bmQtY29sb3I6ICMxRjFGMUY7XG5ib3JkZXI6IDFweCBzb2xpZCAjNTA1MDUwO1xufVxuZGl2I3Jvb3QubGlnaHQge1xuYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7O1xuYm9yZGVyOiAxcHggc29saWQgI0MwQzBDMDtcbn1cbiAgICBidXR0b24ge1xuICAgICAgYXBwZWFyYW5jZTogbm9uZTtcbiAgICAgIG1hcmdpbjogMHB4O1xuICAgICAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICAgICAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gICAgICBib3JkZXI6IDBweDtcbiAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICBmb250LXNpemU6IDAuOHJlbTtcbiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgZm9udC1mYW1pbHk6IHN5c3RlbS11aTtcbiAgICB9XG4gICAgZGl2LmxpZ2h0IGJ1dHRvbiB7XG5iYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudFxufVxuICAgIGRpdi5kYXJrIGJ1dHRvbiB7XG5iYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMCk7XG59XG4gICAgZGl2LmRhcmsgYnV0dG9uLnNlbGVjdGVke1xuICAgICAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMS4wKTtcbiAgICAgIC8vYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjA3KTtcbiAgICB9XG4gICAgZGl2LmRhcmsgYnV0dG9uLm5vdC1zZWxlY3RlZHtcbiAgICAgIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOCk7XG4gICAgICAvL2JhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMCk7XG4gICAgfVxuICAgIGRpdi5saWdodCBidXR0b24uc2VsZWN0ZWQgeyBjb2xvcjogd2hpdGU7fVxuICAgIGRpdi5saWdodCBidXR0b24ubm90LXNlbGVjdGVkIHsgY29sb3I6ICM1MDUwNTA7fVxuICAgIGRpdi5zZWxlY3RlZCwgZGl2Lm5vdC1zZWxlY3RlZHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBwYWRkaW5nOiAwcHggNHB4O1xuYm9yZGVyLXJhZGl1czogMnB4O1xudHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjFzO1xuICAgIH1cbiAgICBkaXYuZGFyayBkaXYuc2VsZWN0ZWQge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI0FBQUFBQTtcbiAgICB9XG4gICAgZGl2LmRhcmsgZGl2Lm5vdC1zZWxlY3RlZCB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMCk7XG5cbiAgICB9XG4gICAgZGl2LmRhcmsgZGl2Lm5vdC1zZWxlY3RlZDpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7XG4gICAgfVxuZGl2LmxpZ2h0IGRpdi5ub3Qtc2VsZWN0ZWQ6aG92ZXIge2JhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4wNSk7fVxuICAgIGRpdi5saWdodCBkaXYuc2VsZWN0ZWQge1xuYmFja2dyb3VuZC1jb2xvcjogIzAwNzdGRjtcbn1cbmRpdi5saWdodCBkaXYubm90LXNlbGVjdGVkIHtcbmJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xufVxuXG4gICAgYDtcbiAgICAgICAgLy8gcmV0dXJuIGBcbiAgICAgICAgLy8gZGl2I3Jvb3R7XG4gICAgICAgIC8vICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgLy8gICBncmlkLWF1dG8tY29sdW1uczogMWZyO1xuICAgICAgICAvLyAgIGdyaWQtYXV0by1mbG93OiBjb2x1bW47XG4gICAgICAgIC8vIH1cbiAgICAgICAgLy8gZGl2LnRhYi1pdGVtLWNvbnRhaW5lciB7XG4gICAgICAgIC8vICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgLy8gICBqdXN0aWZ5LWl0ZW1zOiBzdHJldGNoO1xuICAgICAgICAvLyAgIHBhZGRpbmc6IDBweCA4cHg7XG4gICAgICAgIC8vIH1cbiAgICAgICAgLy8gZGl2LnRhYi1pdGVtLWNvbnRhaW5lci5zZWxlY3RlZCB7XG4gICAgICAgIC8vICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIGJsYWNrO1xuICAgICAgICAvLyB9XG4gICAgICAgIC8vIGRpdi50YWItaXRlbS1jb250YWluZXIgYnV0dG9uIHtcbiAgICAgICAgLy8gICB3aWR0aDogMTAwJTtcbiAgICAgICAgLy8gICBiYWNrZ3JvdW5kLWNvbG9yOiAjRkZGRkZGO1xuICAgICAgICAvLyAgIG91dGxpbmU6IG5vbmU7XG4gICAgICAgIC8vICAgYm9yZGVyOiBub25lO1xuICAgICAgICAvLyB9XG4gICAgICAgIC8vIGRpdi50YWItaXRlbS1jb250YWluZXIgYnV0dG9uOmhvdmVyIHtcbiAgICAgICAgLy8gICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjBGMEYwO1xuICAgICAgICAvLyB9XG4gICAgICAgIC8vICAgYDtcbiAgICB9XG4gICAgcmVuZGVySFRNTCgpIHtcbiAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgPGRpdiBpZD1cInJvb3RcIiBjbGFzcz0ke3RoaXMuZ2V0QXR0cmlidXRlKFwidGhlbWVcIikgfHwgXCJsaWdodFwifT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG4gICAgfVxufVxuZXhwb3J0cy5UYWJTZWxlY3Rpb24gPSBUYWJTZWxlY3Rpb247XG5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJ0YWItc2VsZWN0aW9uXCIsIFRhYlNlbGVjdGlvbik7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQ29tcG9uZW50QmFzZSIsIkhUTUxFbGVtZW50IiwiY29uc3RydWN0b3IiLCJzdXBlciIsInNoYWRvdyIsInRoaXMiLCJhdHRhY2hTaGFkb3ciLCJtb2RlIiwic3R5bGUiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsImdldFN0eWxlIiwiaW5uZXJIVE1MIiwicmVuZGVySFRNTCIsImFwcGVuZENoaWxkIiwic2VsZWN0aW9uXzEiLCJjdXN0b21FbGVtZW50cyIsImRlZmluZSIsIkN1c3RvbVNlbGVjdFZpZXciLCJUeXBlU2VsZWN0VmlldyIsImludGVybmFsT3B0aW9ucyIsImdldEF0dHJpYnV0ZSIsIm9ic2VydmVkQXR0cmlidXRlcyIsIm9wdGlvbnMiLCJvcHRpb25zTGlzdENvbnRhaW5lciIsInNoYWRvd1Jvb3QiLCJnZXRFbGVtZW50QnlJZCIsImlubmVyVGV4dCIsIm9wdGlvbiIsIm9wdGlvbkVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJsYWJlbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2siLCJuYW1lIiwib2xkVmFsdWUiLCJuZXdWYWx1ZSIsInNlbGVjdGVkT3B0aW9uSW5kZXgiLCJwYXJzZUludCIsImVsZW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImNsYXNzTmFtZSIsImxlbmd0aCIsIk9wdGlvbnMiLCJ0aGVtZSIsInBsYWNlaG9sZGVyIiwib25pbnB1dCIsImV2ZW50Iiwib25TZWFyY2hJbnB1dENoYW5nZSIsInRhcmdldCIsIm9ua2V5ZG93biIsImtleSIsImJsdXIiLCJvbkZvY3VzIiwidG9TdHJpbmciLCJvbkJsdXIiLCJvbnN1Ym1pdCIsIm9uU2VhcmNoRm9ybVN1Ym1pdCIsIm9uZm9jdXMiLCJvbmJsdXIiLCJzZWxlY3RlZFZhbHVlIiwib25PcHRpb25TZWxlY3RlZCIsImNyZWF0ZU5ld0J1dHRvbiIsIm9uQ3JlYXRlTmV3QnV0dG9uQ2xpY2tlZCIsInNlbGVjdFZpZXciLCJBcnJheSIsIm5ld09wdGlvbiIsInB1c2giLCJjdXJyZW50TGFiZWwiLCJmb2N1cyIsInNldENyZWF0ZU5ld0J1dHRvbkRpc3BsYXkiLCJmaWx0ZXJlZE9wdGlvbnMiLCJzZWFyY2hRdWVyeSIsImZpbHRlciIsImluY2x1ZGVzIiwic2VsZWN0ZWQiLCJUYWJTZWxlY3Rpb24iLCJiYXNlXzEiLCJjdXJyZW50U2VsZWN0ZWRJbmRleCIsInJlbmRlckxhYmVscyIsImxhYmVscyIsIkpTT04iLCJwYXJzZSIsInJvb3RFbGVtZW50Iiwic2VsZWN0ZWRJbmRleCIsImluZGV4IiwibGFiZWxFbGVtZW50IiwibGFiZWxTZWxlY3RlZCIsImZpbmFsSW5kZXgiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIl0sInNvdXJjZVJvb3QiOiIifQ==